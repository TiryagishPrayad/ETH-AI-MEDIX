{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tiryagishprayad/Pictures/finalproject/web5/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/tiryagishprayad/Pictures/finalproject/web5/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/tiryagishprayad/Pictures/finalproject/web5/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{BrowserRouter as Router,Route,Routes}from\"react-router-dom\";import Upload from\"./artifacts/contracts/Upload.sol/Upload.json\";import{useState,useEffect}from\"react\";import{ethers}from\"ethers\";import FileUpload from\"./components/FileUpload\";import Display from\"./components/Display\";import Modal from\"./components/Modal\";import Header from\"./components/header\";import Feedback from\"./components/Feedback\";import\"./App.css\";import Disease from\"./components/dise\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),account=_useState2[0],setAccount=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),contract=_useState4[0],setContract=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),provider=_useState6[0],setProvider=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),modalOpen=_useState8[0],setModalOpen=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),uploadedRecords=_useState10[0],setUploadedRecords=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),userName=_useState12[0],setUserName=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isNameSet=_useState14[0],setIsNameSet=_useState14[1];useEffect(function(){var loadProvider=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _provider,signer,address,contractAddress,_contract,name;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_provider=new ethers.providers.Web3Provider(window.ethereum);if(!_provider){_context.next=23;break;}window.ethereum.on(\"chainChanged\",function(){window.location.reload();});window.ethereum.on(\"accountsChanged\",function(){window.location.reload();});_context.next=7;return _provider.send(\"eth_requestAccounts\",[]);case 7:signer=_provider.getSigner();_context.next=10;return signer.getAddress();case 10:address=_context.sent;setAccount(address);contractAddress=\"0x6eeF5dF1eB00bC8927A33899Df039FcF63014dAD\";_contract=new ethers.Contract(contractAddress,Upload.abi,signer);setContract(_contract);setProvider(_provider);fetchUploadedRecords(_contract,address);_context.next=19;return _contract.getName(address);case 19:name=_context.sent;if(name){setUserName(name);setIsNameSet(true);}_context.next=24;break;case 23:console.error(\"Metamask is not installed\");case 24:_context.next=29;break;case 26:_context.prev=26;_context.t0=_context[\"catch\"](0);console.error(\"Error loading provider:\",_context.t0);case 29:case\"end\":return _context.stop();}},_callee,null,[[0,26]]);}));return function loadProvider(){return _ref.apply(this,arguments);};}();loadProvider();},[]);var fetchUploadedRecords=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(contract,address){var records;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return contract.display(address);case 3:records=_context2.sent;setUploadedRecords(records);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error(\"Error fetching uploaded records:\",_context2.t0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return function fetchUploadedRecords(_x,_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Router,{children:[!modalOpen&&/*#__PURE__*/_jsx(\"button\",{className:\"share\",onClick:function onClick(){return setModalOpen(true);},children:\"Share\"}),modalOpen&&/*#__PURE__*/_jsx(Modal,{setModalOpen:setModalOpen,contract:contract}),/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Username: \",userName]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Account Address: \",account]})]}),!isNameSet?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Your Name\",value:userName,onChange:function onChange(e){return setUserName(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){contract.setName(userName);setIsNameSet(true);},children:\"Set Name\"})]}):null]}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(FileUpload,{account:account,provider:provider,contract:contract})}),/*#__PURE__*/_jsx(Route,{path:\"/display\",element:/*#__PURE__*/_jsx(Display,{contract:contract,account:account})}),/*#__PURE__*/_jsx(Route,{path:\"/feedback\",element:/*#__PURE__*/_jsx(Feedback,{contract:contract,account:account,uploadedRecords:uploadedRecords,userName:userName})}),/*#__PURE__*/_jsx(Route,{path:\"/disease\",element:/*#__PURE__*/_jsx(Disease,{contract:contract,account:account})})]})]})]});}export default App;","map":{"version":3,"names":["BrowserRouter","Router","Route","Routes","Upload","useState","useEffect","ethers","FileUpload","Display","Modal","Header","Feedback","Disease","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","account","setAccount","_useState3","_useState4","contract","setContract","_useState5","_useState6","provider","setProvider","_useState7","_useState8","modalOpen","setModalOpen","_useState9","_useState10","uploadedRecords","setUploadedRecords","_useState11","_useState12","userName","setUserName","_useState13","_useState14","isNameSet","setIsNameSet","loadProvider","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_provider","signer","address","contractAddress","_contract","name","wrap","_callee$","_context","prev","next","providers","Web3Provider","window","ethereum","on","location","reload","send","getSigner","getAddress","sent","Contract","abi","fetchUploadedRecords","getName","console","error","t0","stop","apply","arguments","_ref2","_callee2","records","_callee2$","_context2","display","_x","_x2","children","className","onClick","type","placeholder","value","onChange","e","target","setName","path","element"],"sources":["/Users/tiryagishprayad/Pictures/finalproject/web5/src/App.js"],"sourcesContent":["import { BrowserRouter as Router, Route, Routes } from \"react-router-dom\";\nimport Upload from \"./artifacts/contracts/Upload.sol/Upload.json\";\nimport { useState, useEffect } from \"react\";\nimport { ethers } from \"ethers\";\nimport FileUpload from \"./components/FileUpload\";\nimport Display from \"./components/Display\";\nimport Modal from \"./components/Modal\";\nimport Header from \"./components/header\";\nimport Feedback from \"./components/Feedback\";\nimport \"./App.css\";\nimport Disease from \"./components/dise\";\n\nfunction App() {\n  const [account, setAccount] = useState(\"\");\n  const [contract, setContract] = useState(null);\n  const [provider, setProvider] = useState(null);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [uploadedRecords, setUploadedRecords] = useState([]);\n  const [userName, setUserName] = useState(\"\");\n  const [isNameSet, setIsNameSet] = useState(false);\n\n  useEffect(() => {\n    const loadProvider = async () => {\n      try {\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\n        if (provider) {\n          window.ethereum.on(\"chainChanged\", () => {\n            window.location.reload();\n          });\n\n          window.ethereum.on(\"accountsChanged\", () => {\n            window.location.reload();\n          });\n\n          await provider.send(\"eth_requestAccounts\", []);\n          const signer = provider.getSigner();\n          const address = await signer.getAddress();\n          setAccount(address);\n          const contractAddress = \"0x6eeF5dF1eB00bC8927A33899Df039FcF63014dAD\";\n          const contract = new ethers.Contract(contractAddress, Upload.abi, signer);\n          setContract(contract);\n          setProvider(provider);\n          fetchUploadedRecords(contract, address);\n          const name = await contract.getName(address);\n          if (name) {\n            setUserName(name);\n            setIsNameSet(true);\n          }\n        } else {\n          console.error(\"Metamask is not installed\");\n        }\n      } catch (error) {\n        console.error(\"Error loading provider:\", error);\n      }\n    };\n\n    loadProvider();\n  }, []);\n\n  const fetchUploadedRecords = async (contract, address) => {\n    try {\n      const records = await contract.display(address);\n      setUploadedRecords(records);\n    } catch (error) {\n      console.error(\"Error fetching uploaded records:\", error);\n    }\n  };\n\n  return (\n    <Router>\n      {!modalOpen && (\n        <button className=\"share\" onClick={() => setModalOpen(true)}>\n          Share\n        </button>\n      )}\n      {modalOpen && <Modal setModalOpen={setModalOpen} contract={contract} />}\n\n      <div className=\"App\">\n        <Header />\n        <div>\n          <div>\n            <p>Username: {userName}</p>\n            <p>Account Address: {account}</p>\n          </div>\n\n          {!isNameSet ? (\n            <div>\n              <input\n                type=\"text\"\n                placeholder=\"Your Name\"\n                value={userName}\n                onChange={(e) => setUserName(e.target.value)}\n              />\n              <button\n                onClick={() => {\n                  contract.setName(userName);\n                  setIsNameSet(true);\n                }}\n              >\n                Set Name\n              </button>\n            </div>\n          ) : null}\n        </div>\n\n        {/* <div>\n          <select\n            value={selectedRecipient}\n            onChange={(e) => setSelectedRecipient(e.target.value)}\n          >\n            <option value=\"\">Select Recipient</option>\n            {accountNumbers.map((address) => (\n              <option key={address} value={address}>\n                {address}\n              </option>\n            ))}\n          </select>\n          <button onClick={sendEther}>Send Ether</button>\n        </div> */}\n\n        <Routes>\n          <Route\n            path=\"/\"\n            element={\n              <FileUpload account={account} provider={provider} contract={contract} />\n            }\n          />\n          <Route\n            path=\"/display\"\n            element={<Display contract={contract} account={account} />}\n          />\n          <Route\n            path=\"/feedback\"\n            element={\n              <Feedback\n                contract={contract}\n                account={account}\n                uploadedRecords={uploadedRecords}\n                userName={userName}\n              />\n            }\n          />\n          <Route path=\"/disease\" element={<Disease contract={contract} account={account} />} />\n        </Routes>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}