{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tiryagishprayad/Pictures/dis3.2/web4/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/tiryagishprayad/Pictures/dis3.2/web4/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/tiryagishprayad/Pictures/dis3.2/web4/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{BrowserRouter as Router,Route,Routes}from\"react-router-dom\";import Upload from\"./artifacts/contracts/Upload.sol/Upload.json\";import{useState,useEffect}from\"react\";import{ethers}from\"ethers\";import FileUpload from\"./components/FileUpload\";import Display from\"./components/Display\";import Modal from\"./components/Modal\";import Header from\"./components/header\";import Feedback from\"./components/Feedback\";import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),account=_useState2[0],setAccount=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),contract=_useState4[0],setContract=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),provider=_useState6[0],setProvider=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),modalOpen=_useState8[0],setModalOpen=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),uploadedRecords=_useState10[0],setUploadedRecords=_useState10[1];useEffect(function(){var loadProvider=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _provider,signer,address,contractAddress,_contract;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_provider=new ethers.providers.Web3Provider(window.ethereum);if(!_provider){_context.next=19;break;}window.ethereum.on(\"chainChanged\",function(){window.location.reload();});window.ethereum.on(\"accountsChanged\",function(){window.location.reload();});_context.next=7;return _provider.send(\"eth_requestAccounts\",[]);case 7:signer=_provider.getSigner();_context.next=10;return signer.getAddress();case 10:address=_context.sent;setAccount(address);contractAddress=\"0x61331B26303d5C67F78a7A8EE365543A8b5656D8\";_contract=new ethers.Contract(contractAddress,Upload.abi,signer);setContract(_contract);setProvider(_provider);fetchUploadedRecords(_contract,address);_context.next=20;break;case 19:console.error(\"Metamask is not installed\");case 20:_context.next=25;break;case 22:_context.prev=22;_context.t0=_context[\"catch\"](0);console.error(\"Error loading provider:\",_context.t0);case 25:case\"end\":return _context.stop();}},_callee,null,[[0,22]]);}));return function loadProvider(){return _ref.apply(this,arguments);};}();loadProvider();},[]);var fetchUploadedRecords=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(contract,address){var records;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return contract.display(address);case 3:records=_context2.sent;setUploadedRecords(records);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error(\"Error fetching uploaded records:\",_context2.t0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return function fetchUploadedRecords(_x,_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Router,{children:[!modalOpen&&/*#__PURE__*/_jsx(\"button\",{className:\"share\",onClick:function onClick(){return setModalOpen(true);},children:\"Share\"}),modalOpen&&/*#__PURE__*/_jsx(Modal,{setModalOpen:setModalOpen,contract:contract}),/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"blank\"}}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(FileUpload,{account:account,provider:provider,contract:contract})}),/*#__PURE__*/_jsx(Route,{path:\"/display\",element:/*#__PURE__*/_jsx(Display,{contract:contract,account:account})}),/*#__PURE__*/_jsx(Route,{path:\"/feedback\",element:/*#__PURE__*/_jsx(Feedback,{contract:contract,account:account,uploadedRecords:uploadedRecords})})]})]})]});}export default App;","map":{"version":3,"names":["BrowserRouter","Router","Route","Routes","Upload","useState","useEffect","ethers","FileUpload","Display","Modal","Header","Feedback","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","account","setAccount","_useState3","_useState4","contract","setContract","_useState5","_useState6","provider","setProvider","_useState7","_useState8","modalOpen","setModalOpen","_useState9","_useState10","uploadedRecords","setUploadedRecords","loadProvider","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_provider","signer","address","contractAddress","_contract","wrap","_callee$","_context","prev","next","providers","Web3Provider","window","ethereum","on","location","reload","send","getSigner","getAddress","sent","Contract","abi","fetchUploadedRecords","console","error","t0","stop","apply","arguments","_ref2","_callee2","records","_callee2$","_context2","display","_x","_x2","children","className","onClick","style","color","path","element"],"sources":["/Users/tiryagishprayad/Pictures/dis3.2/web4/src/App.js"],"sourcesContent":["import { BrowserRouter as Router, Route, Routes } from \"react-router-dom\";\nimport Upload from \"./artifacts/contracts/Upload.sol/Upload.json\";\nimport { useState, useEffect } from \"react\";\nimport { ethers } from \"ethers\";\nimport FileUpload from \"./components/FileUpload\";\nimport Display from \"./components/Display\";\nimport Modal from \"./components/Modal\";\nimport Header from \"./components/header\";\nimport Feedback from \"./components/Feedback\";\nimport \"./App.css\";\n\n\n\nfunction App() {\n  const [account, setAccount] = useState(\"\");\n  const [contract, setContract] = useState(null);\n  const [provider, setProvider] = useState(null);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [uploadedRecords, setUploadedRecords] = useState([]);\n\n  useEffect(() => {\n    const loadProvider = async () => {\n      try {\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\n        if (provider) {\n          window.ethereum.on(\"chainChanged\", () => {\n            window.location.reload();\n          });\n\n          window.ethereum.on(\"accountsChanged\", () => {\n            window.location.reload();\n          });\n\n          await provider.send(\"eth_requestAccounts\", []);\n          const signer = provider.getSigner();\n          const address = await signer.getAddress();\n          setAccount(address);\n          const contractAddress = \"0x61331B26303d5C67F78a7A8EE365543A8b5656D8\";\n          const contract = new ethers.Contract(\n            contractAddress,\n            Upload.abi,\n            signer\n          );\n          setContract(contract);\n          setProvider(provider);\n          fetchUploadedRecords(contract, address);\n        } else {\n          console.error(\"Metamask is not installed\");\n        }\n      } catch (error) {\n        console.error(\"Error loading provider:\", error);\n      }\n    };\n\n    loadProvider();\n  }, []);\n\n  const fetchUploadedRecords = async (contract, address) => {\n    try {\n      const records = await contract.display(address);\n      setUploadedRecords(records);\n    } catch (error) {\n      console.error(\"Error fetching uploaded records:\", error);\n    }\n  };\n\n  return (\n    <Router>\n      {!modalOpen && (\n        <button className=\"share\" onClick={() => setModalOpen(true)}>\n          Share\n        </button>\n      )}\n      {modalOpen && <Modal setModalOpen={setModalOpen} contract={contract} />}\n\n      <div className=\"App\">\n        <Header />\n\n        <p style={{ color: \"blank\" }}>{/* Account: {account ? account : \"Not connected\"} */}</p>\n\n        <Routes>\n          <Route\n            path=\"/\"\n            element={\n              <FileUpload account={account} provider={provider} contract={contract} />\n            }\n          />\n          <Route\n            path=\"/display\"\n            element={<Display contract={contract} account={account} />}\n          />\n          <Route\n            path=\"/feedback\"\n            element={\n              <Feedback\n                contract={contract}\n                account={account}\n                uploadedRecords={uploadedRecords}\n              />\n            }\n          />\n        </Routes>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}